<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    
    <title>
      Autour de moi
    </title>
    
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">
    
    <!-- Custom styles for this template -->
    
    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]>
<script src="../../assets/js/ie8-responsive-file-warning.js">
</script>
<![endif]-->
    
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js">
</script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js">
</script>
<![endif]-->
	<style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
	  #map-canvas {
		height: 450px;
    margin: -14px;
	  }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
// This example adds a marker to indicate the position
// of Bondi Beach in Sydney, Australia
function initialize() {
  var mapOptions = {
    zoom: 15,
    center: new google.maps.LatLng(44.812798, -0.554430)
  }
  var map = new google.maps.Map(document.getElementById('map-canvas'),
                                mapOptions);
	var pois = [
		{
			name : 'initial',
			position : '44.812916, -0.554460',
			title : 'Votre position',
			info : 'HAHAHA'
		},
		{
			icon : 'sun',
			position : '44.814012, -0.548879'
		},
		{
			icon : 'frog',
			position: '44.811060, -0.560467'
		},
		{
			icon : 'cloud',
			position : '44.8065, -0.558577',
			title : 'Pluviométrie'
		},
		{
			icon : 'building',
			position : '44.810, -0.548412'
		}
	];
	var markers = new Array();
	var images = new Array();
	var infowindows = new Array();
	for (indexPoi = 0; indexPoi < pois.length; ++indexPoi)
	{
		poi = pois[indexPoi];
		var positionData = poi.position.split(',');
		  var myLatLng = new google.maps.LatLng(positionData[0], positionData[1]);
		  var markerData = {
			position: myLatLng,
			map: map
		  };
		if (typeof poi.icon != 'undefined')
			markerData.icon = 'img/' + poi.icon + '.png';
		if (typeof poi.title != 'undefined')
			markerData.title = poi.title;
		markers[indexPoi] = new google.maps.Marker(markerData);
	}
	 var infowindow = new google.maps.InfoWindow({
      content: '<p><strong>Pluviométrie</strong></p>' +
		'<p>Il s\'agit de relever la hauteur en mm dans ce quartier</p>'+
		'<p>La mesure doit être effectuée :</p>' +
		'<ul><li>Sur un sol bétonné</li><li>En journée</li><li>Avec la Crowdbox</li></ul>'
  });
			
			google.maps.event.addListener(markers[3], 'click', function(el) {
			console.log(markers[0]);
			
				infowindow.open(map,markers[3]);
		  });


  
}

google.maps.event.addDomListener(window, 'load', initialize);

    </script>
  </head>
  
  <body>
    <p>
      <div class="container">
		<div class="panel panel-primary">
          <div class="panel-heading">
            <strong>Autour de moi</strong>
          </div>
          <div class="panel-body">
            <div id="map-canvas"></div>
          </div>
      </div>
		<p class="text-right"><a href="index.html" class="btn btn-success text-right">
        Retour
			</a></p>
    <!-- /container -->
  </p>
  
  
  <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
</body>
</html>